var C=Object.defineProperty,h=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var y=(i,t,e)=>t in i?C(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,m=(i,t)=>{for(var e in t||(t={}))I.call(t,e)&&y(i,e,t[e]);if(f)for(var e of f(t))k.call(t,e)&&y(i,e,t[e]);return i},w=(i,t)=>h(i,R(t));var r=(i,t,e)=>new Promise((s,o)=>{var l=n=>{try{a(e.next(n))}catch(c){o(c)}},u=n=>{try{a(e.throw(n))}catch(c){o(c)}},a=n=>n.done?s(n.value):Promise.resolve(n.value).then(l,u);a((e=e.apply(i,t)).next())});var d=class{constructor(t){this.context=t}labels(t){return r(this,null,function*(){let{owner:e,repo:s,issue_number:o}=yield this.context.issue();yield this.context.octokit.issues.addLabels({owner:e,repo:s,issue_number:o,labels:t})})}assignee(t){return r(this,null,function*(){let e=yield this.context.issue();yield this.context.octokit.issues.addAssignees(w(m({},e),{assignees:t}))})}reply(t){return r(this,null,function*(){let e=this.context.issue({body:t});yield this.context.octokit.issues.createComment(e)})}parseIssueTitle(t){return r(this,null,function*(){var s;return{contributor:(s=t.match(/\(\w+\)/g))==null?void 0:s.map(o=>o.replace(/\(|\)/gi,"")).join("")}})}},p=i=>new d(i);var g={build:"build",chore:"chore",ci:"ci",docs:"docs",feat:"feat",fix:"bug",perf:"pref",refactor:"refactor",revert:"revert",style:"style",test:"test"};module.exports=i=>{i.on("issues.opened",e=>r(exports,null,function*(){let s=yield t(e);if(!s||!s.issueOpenedReply)return;let o=p(e),l=e.issue(),u=yield e.octokit.issues.get(l),{title:a}=u.data,{contributor:n}=yield o.parseIssueTitle(a),c=Object.keys(g).find(b=>a.startsWith(b));n&&s.components&&(yield o.assignee([s.components[n]])),c&&(yield o.labels([g[c]])),yield o.reply(s.issueOpenedReply)})),i.on("pull_request.opened",e=>r(exports,null,function*(){let s=yield t(e),o=yield e.pullRequest();if(!s||!s.prOpenedReply)return;let l=p(e);s.prOpenedReply.includes("${preview}")&&s.previewUrl&&(yield l.reply(s.prOpenedReply.replace("${preview}",`[preview](${s.previewUrl.replace("${pull_num}",o.pull_number)})`)))})),i.on("pull_request.closed",e=>r(exports,null,function*(){let s=yield t(e);if(!s||!s.prClosedReply)return;yield p(e).reply(s.prClosedReply)}));let t=e=>r(exports,null,function*(){return yield e.config("workflows_app_config.yml")})};
