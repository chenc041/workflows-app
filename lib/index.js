var C=Object.defineProperty,h=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var y=(i,t,e)=>t in i?C(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,m=(i,t)=>{for(var e in t||(t={}))I.call(t,e)&&y(i,e,t[e]);if(f)for(var e of f(t))k.call(t,e)&&y(i,e,t[e]);return i},w=(i,t)=>h(i,R(t));var r=(i,t,e)=>new Promise((s,o)=>{var c=a=>{try{n(e.next(a))}catch(p){o(p)}},l=a=>{try{n(e.throw(a))}catch(p){o(p)}},n=a=>a.done?s(a.value):Promise.resolve(a.value).then(c,l);n((e=e.apply(i,t)).next())});var d=class{constructor(t){this.context=t}labels(t){return r(this,null,function*(){let{owner:e,repo:s,issue_number:o}=yield this.context.issue();yield this.context.octokit.issues.addLabels({owner:e,repo:s,issue_number:o,labels:t})})}assignee(t){return r(this,null,function*(){let e=yield this.context.issue();yield this.context.octokit.issues.addAssignees(w(m({},e),{assignees:t}))})}reply(t){return r(this,null,function*(){let e=this.context.issue({body:t});yield this.context.octokit.issues.createComment(e)})}parseIssueTitle(t){return r(this,null,function*(){var s;return{contributor:(s=t.match(/\(\w+\)/g))==null?void 0:s.map(o=>o.replace(/\(|\)/gi,"")).join("")}})}},u=i=>new d(i);var g={build:"build",chore:"chore",ci:"ci",docs:"docs",feat:"feat",fix:"bug",perf:"pref",refactor:"refactor",revert:"revert",style:"style",test:"test"};module.exports=i=>{i.on("issues.opened",e=>r(exports,null,function*(){let s=yield t(e);if(!s||!s.issueOpenedReply)return;let o=u(e),c=e.issue(),l=yield e.octokit.issues.get(c),{title:n}=l.data,{contributor:a}=yield o.parseIssueTitle(n),p=Object.keys(g).find(b=>n.startsWith(b));a&&s.components&&(yield o.assignee([s.components[a]])),p&&(yield o.labels([g[p]])),yield o.reply(s.issueOpenedReply)})),i.on("pull_request.opened",e=>r(exports,null,function*(){let s=yield t(e),o=yield e.pullRequest();if(!s||!s.prOpenedReply)return;let c=u(e),{previewUrl:l,prOpenedReply:n}=s;n.includes("${preview}")&&l?yield c.reply(s.prOpenedReply.replace("${preview}",`[preview](${l.replace("${pull_num}",o.pull_number)})`)):n&&(yield c.reply(n))})),i.on("pull_request.closed",e=>r(exports,null,function*(){let s=yield t(e);if(!s||!s.prClosedReply)return;yield u(e).reply(s.prClosedReply)}));let t=e=>r(exports,null,function*(){return yield e.config("workflows_app_config.yml")})};
